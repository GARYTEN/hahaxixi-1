
const $ = new Env('京东快递签到');

const notify = $.isNode() ? require('./sendNotify') : '';
//Node.js用户请在jdCookie.js处填写京东ck;
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
let jdNotify = true;//是否关闭通知，false打开通知推送，true关闭通知推送
const randomCount = $.isNode() ? 20 : 5;
//IOS等用户直接用NobyDa的jd cookie
let cookiesArr = [], cookie = '', message;
var _0xodS='jsjiami.com.v6',_0x24fe=[_0xodS,'DH8rwobCqA==','wol7w6XCpMOQ','UcOGw4jDosKR','ZyzCrcKm','H3p7KA==','wpfCpcKRwqzCpBDlt5rlpZbmlboBYsOK','5Lq35Lit6LaM5Y6O','XU1Ow4AJ','MuiusOmEmeaXk+ebi+W+iOiMuOWNiMKWw4Bqw4whOg==','AlDDv8KtZA==','wonDkcKD','wovDn8KJIQ==','w6jDsOWlkOi1vw1p5Y+z5ZuuQhM=','wqLCuQ87QCUV','w5HCokV8Pg==','wonDv8Og','w6LDjnI7','44GN5Lib5LqQ6LSC5Y++','w4jDgk01Fg==','w60twohhIA==','6Ky45YiJ6Zq65oeU5Z+Bwp1vwrc6f+i+mOWEieaigOS8teaXneWGkeWsnC7luZjorK/pgrbovYPohIDmnbPljrfojYvljpFvw7jDn8ODNMOm','dzXCoB7Chg==','wpbChRY8WQ==','ccK4ZsOVOA==','RxfCrz3CkQ==','wpNnwrg=','w5Uiwrc=','ZXLCuQ==','dVDDhxw=','w43CsMOKXeiuteaxquWntOi3u++8neivn+aiquacsue8tui2rumEq+iuhQ==','wphWw7fCp8OV','wqHCi8Orw7xP','w6cEd8KeWw==','woLCsyoQfQ==','5LiE5pa456+P5YmO5ouZ5Yuj776S6I2v5b+G','J00ow4tWIsKS','w73DnC4ww6U=','EnR4OcKaFXs=','wpnCmMOueCc=','aAjCkyXDhA==','w6/DgHs7','44OZ566O5Yqo44KC5aaV6LSC77+q5Lu35paB5bSr562g5Ymy','wo7Cg8KkwrDCig==','J8KaeA==','w6QRd8KEUCPDli3Dgw==','PsOf5aSb6LSGwotG5Y2r5ZixP3E=','wojDo8OgwoDCv8KL','wq0nw4kkwqo=','w5jCkcOBw61j','woHCnsO9','KFLDig==','wopYwqV8w7Q=','w5LDjngpw7N4QcO9w5Z0cMKBwpcEwpbChcKxw6AVwqzCocKPIcOhwozCsMKrwq/DvsOrw4EQw64=','TwnCuR/CkFlOw4rCjyPDjl7CiT8=','OMKQbR/CoV4OwrfDghYDw7rDr0PCtg==','LsKLwrHCpcOQRyQFw7VnEsOmw4N5eRVJIzPDvsKYegYiw4TCv0hyASo=','DcOyw4ZSw7lpOMOWasKWJFvCvUfCpsKQw7ZJBMOhw4ZZwo3Cg8O1w7nDgFouwrF2wpZZ','ccOqw5PDgcKmwrTDrGE5wolFLDvDiw==','C8KAw4RjBzDCrBxZw7YiwojDlgk=','wqfCmg8Pw4VPbMOyw74TBMO3w6A=','w5/DuDxjak8rGxrCg8Oiwo/DuB3DmgZQwovCt00JcMO+DyJxwpHDgirDvcKowo5SGRAcecOTw6zCu8KUwo8Bw6DCnsO4wpUrVVp/VBrDqEvCoMKIWUpmHWhWwr/DmBXCoHsyJQ/CvcOvXV4UUw==','LXHDusKqag==','w5Q3CnnCmA==','FMKYwoVSLg==','wrp0w7zCmsOR','XMOzw7bDoMKC','w4TDmsKDwqEYwp5cID9kdHwW','U0vDujwx','w7fCjX4uNcKzIcKowpLChsKgw6pATQp7w4TDnxITQ8Ocw4cIwoo4w6DDhRrCvcKK','w4TDgsKDwrgb','w7rDlDc5wq1uWsOHw5w=','FHZmOcKG','w5zDrxN8fhE=','w6zDmyw=','CcOsw4A=','wrVMwoBnw5QPAV0Dw5DClh4M','w6vCkGFZFw==','wqjCk0HCv8KIwqth','VWLDrxd4','w7AAccKJXzDDng==','ZXLCrm7CvnpmYMOCVcKOw5jDq0QQw5Q=','wr3Ds8KoDA59wrvDsm5/NsKlHiE=','w4JvwrF1w5TDnihNFMKIw6jChsKbwrzDnMOhIxxzM8O8cGAAwpvCh8OgU8ORw5vDvg==','H8OIJMK8wrkvwr3Dk8OkD8KDUnJ+wpHCpRbDh3vDildgw6HDs8KD','JMKgc29AP8KGw7ZH','OMOaw7xQcA==','BsKCazpZVMONwq7DlcKaXsOtw47CqQ==','w5rDpcKrwpTCiCd3JnVkAcK+OQ==','w6XCrMKxw4zCn8ODw7TCt8OMW3zDnSY4woBHw7XCtcOfw5xpax1tUMOLw6U3Gx5+dBIaw6VpwqY1CCfDlMKoDMKLwoshXsO2w6UYw4U0w4jDl8OnFg0eQ8KXXirDgcOCw4Vowp7DkcKTHMOMZx3Dl0zDjlk=','V0bDhhM9','UHfDkT5t','w4sowqRmw4vDkyk=','YsKdX8O9OwI9wpE4D8O5wpPChQDDhknDg1bDosODGcK0RQhjw4xBcCMlw6wO','w4Mlw71mw4o=','a8KZW8OhIVtzw4omEcOkwpLChRfCh0TCgE/CqMOWFMK0Xw1sw4JLM3Ygwq5deGsyNC7Ck8KcGgPChj3DjsKJw7fDvA5T','w7DCk2RK','J8KRZAxkHcOFwojCgcOJWcO/w4TDs3HDssKSw7bDs8Obw73Dp8KQw4XDrAnCtDzDqcKxwoXCjnY=','w7PDhsOmw7lL','w4nDsUthw5c=','B8OIJwlnNsOWwqvCi8OJWcO/worDuXDDusK8w6XDvsK+wrDCscKWw57DpBXCjyHCr8KvwoXCnglh','H8Oiw45rfg==','wpnDnsKDwrA2','w5QJVMKeRA==','wqzCnMO0TjY=','wr1Bwp1Rw6Y=','wpnCnVTCssKR','NsKawrNmOA==','wqfCkcOew7nDsw==','wqYpw4UOwrpGwrHDtzPDl8Ovwpwwwopdw4fDuG8XKjrDiF5DwrMSfMK9wpgZw4RbecO1w4lawp1OJcOpwoPCr8OC','dcKofEfDuA==','wrTCqRUwSA==','Z8KETMOSMw==','w6kLOWHCrg==','w4rCusO/w7RQ','P0nDo8K8cg==','JcKlwqZkKw==','w4/DrcOGw750','w6HDksKHLVM=','wr3CnMO+w6vDnA==','wpHClMOaw6ZI','wo3Dv8OJwqrCqcKc','wo7ClD4Pfww+UTl0PyI7','OMOZw7o=','WMK7dXbDuSPCpsKORBZrbMOJ','wrh6woV0w7Y=','wprCpXDCicK2wp5Hwoo+WA==','wpPCr8KKwqPCrAFJ','w4XChMO/w5l+','FsKNwp1EKGjCtw==','w5jDqBFUYg==','OWhAAcKQ','L2vDtMK9RQ==','wpTDocOfwpbChA==','cA7CkxHCoA==','44Ol5oy856aJ44KH6K+c5Yel6I+b5Y+H5Lqk5LmI6LWn5Y685LiuYMKXX1Ujw7/CgOeYj+aMsuS9seeVgibCrgB2w4xS55q85Lqz5LqG562q5Yqw6I6H5YyE','JsKYBSlW','d17DjQ==','AsKcwptJJ3vCvxIb','c8Okw7PDq8Kd','UyLCrRA=','w6/Ds8Olwqwjw4k/','LcOCw79M','d8KRXA==','TsObwo7CikzDvDtq','FHVg','woQZw646wow+w4vCnw==','HWXDrsKxQw==','woZYw7c=','eXzCrDDCqw==','woPCssOAbhI=','w4zCmMK9w7rChg==','w5gPwqBnIQ==','woRXA8ONw7A=','w6XDnFMxIsKzKw==','bGXCtzc=','w7bDpsOzw6NKCijCtg==','R8OOw7zDosK8wqHDsVY=','w7sKYg==','5Luj5Lun5p+M5Ymo5ZuR6L+w5Zqb56iL5pes5o2m','wq7CuQ89TygFIBJXVA8Awog=','D8KSSQTCug==','MEkjw6Zn','w5oVwptKw4Y=','HsK8wrtEBA==','wo0/w6ccwog=','VizCkMK6w4s=','w4AOGUfCuA==','LcKbFSFj','LMKUwrPCug==','w53DpsOEwr4y','J8KPwrXCucOKHmpew7ZhEsKuw4prf1YadXXDtcKOJwA5wpTDpQ==','w7XChMKJw6bCow==','w4XDrsKVFWFmwrjCsCLDpgIRwrc=','wrHDn8ORw4PCvw==','JMK7wqxyFl3CkTEsw5M=','w53CskVvFMObwrU=','X8KFZXfDpA==','w67DucOjwo0jw542','woTCisOXw4fDqg==','wo5mwrhVw6M=','w5jDkjgsw7I=','w6HDu8OlwoUr','wpnCg8OUw5NZw58=','woDCgsO9','fjfCusKrw6s=','eTDCvcKlw53ChcKnGw==','S8KRZ3HDsg==','EMKFITxlCg==','w5PCtlZpEg==','w5nCpGtROA==','AXpkPsKa','wprCjsOZw7NIw5k=','P0jDncKwYw==','5Lmi5LmB5p685Yuf5Zqh6K+D6ZWw5pao5oy/5LqI56u077++6K+p5qCn5p6W6IWH6Li36K+/5aWz57yU57qL5oCi5YaJ','6K2f5YiP6Zi85oaR5ZyuLcKTw5QEw4/ov5/lhK3mo4jkvIXml7nlhpblrZDDqeW6t+isi+mDo+i/qOiFtOadkOWMoOiMmeWPmcK6cHVswoPDjQ==','PcONw595w5Y=','w5fDrjdhVA==','w5nDlylVfQ==','w57Dk8OdwoMs','EsKZwo9CCA==','wpLCjsKYwoXCrg==','wqgZw5c8wqo=','SQ/CsA==','w5TCi8Kuwo7orLrmsLflpJnotYLvvL7or5bmoo/mnI/nvLvotKLph4DorLc=','a1DDmAo+','FcKIHAxv','OcKgc28=','wr/CicO1w7XDqw==','KE0h','acOswrY=','asO+wrzCqw==','6K+l5YiA6Zql5oSs5Z6CJMKbwqlPIui+veWFh+ajm+S+u+aWqeWGueWtkMKr5bi76KyA6YCb6L6J6Iel5p2e5Y2/6I+e5Y2WY8OOwrvDoibDhw==','wqszw4c=','J8OpBMKHwo9M','w4jDk3BPw4rCqw==','w4HCnsOXw7t+IMKa','wqw4woROw7tKw7/DoHzCgg==','w7XDiWxvw6IuB8KAw59nZ8OGwoEBwpjDh8OIw7NAwo/DrcKZ','IMOGGw7Djl/Dg8OmNzU=','eVPCnUxvwq9awpRs','wqLCs1Y5AXtUa0Ee','wpzDgsKDwqgrDg==','w7fDqFR3TX8Nakw=','HcOGwqk=','w4XCjcKFw7I=','wo9Sw6LCu8O0T8Kd','TMOfw7bDvQ==','wp3CucKwwqjCqRA=','SDLCpws=','ZFXDjw==','w4XDrsKVBHdhwr/CqA==','WMK7dWfDryTCocKW','w6rDjnMtIA==','bVTDng==','w6jCrcKkw5jCjsKMw7w=','wonDrcO3','ccKIWcO0IBI5','w7zDmmw2','XyLCoAfDkcKpw64=','MnR5JsKWHkVhSQ==','MsKHwoZLIHnCnDA=','44Ok5oya56eE44OW6Ky65YS96I6f5Y6x5Lqe5Li96LWp5Yyd5Lmqwq5iwo3CnsKFwqHCvuebr+aPrOS/q+eUlwgaZ8OWw6vCm+eYnOS4tuS6huetreWLkOiPreWPlA==','OcK3wrfCvsOV','w6MbwrRgw4A=','w7oWYg==','w60DFXU=','MX8kwrbCgQ==','w6XDgwwZw5U=','wrzCg3PCuMKO','wpjCr8KQwqDCuR0=','fMOUw7rDu8KcwqHDsVY=','woVOw7PCvcOW','w7oFwqZ1Dw==','woNZw7TCrcOq','w6fDnDk3w458XsOW','UCjCjMKLw5E=','wpjCpcKZ','TwvCh8OCDALDg+W8ueWmkeOBq+S6l+S4tei2nOWPog==','GHVyKMKH','woPCmMO5fwxJwqjCuw==','LsK1w7vDpCPClEQHw5UY','w6oRNH/CjRrDvA==','H8KJwoRF','44CU5o2P56er44OfasORAUbClnfltaTlpbrml7s=','5Li75Lm56LSj5Yya','wplVNsOsw67Ci1DCqw==','w6/CpFR5O8OOwrls','woborZjph5Lml67nmL7lvo/oj7LljZzCosOfw6HCphwcRD3CiMOWEgZywobDk1bChX7DtMKEGMOyw5hwHsOSeUrCiGQGwoc4wrrClGFtwoTClSXCim84Ig==','w6PCvsKGw7nCug==','w6DDhhQzw6R4','LHXjsjLiaLWmQFlCyKie.ScoWm.vX6=='];(function(_0x43b10e,_0x54b98a,_0x2811d5){var _0x3aea5c=function(_0x4afbdc,_0x419356,_0x2de488,_0x16b020,_0x1fcb44){_0x419356=_0x419356>>0x8,_0x1fcb44='po';var _0x3e0384='shift',_0x2522ee='push';if(_0x419356<_0x4afbdc){while(--_0x4afbdc){_0x16b020=_0x43b10e[_0x3e0384]();if(_0x419356===_0x4afbdc){_0x419356=_0x16b020;_0x2de488=_0x43b10e[_0x1fcb44+'p']();}else if(_0x419356&&_0x2de488['replace'](/[LHXLLWQFlCyKeSWX=]/g,'')===_0x419356){_0x43b10e[_0x2522ee](_0x16b020);}}_0x43b10e[_0x2522ee](_0x43b10e[_0x3e0384]());}return 0x79c67;};return _0x3aea5c(++_0x54b98a,_0x2811d5)>>_0x54b98a^_0x2811d5;}(_0x24fe,0xd4,0xd400));var _0x2ab9=function(_0x48cd91,_0xd3c692){_0x48cd91=~~'0x'['concat'](_0x48cd91);var _0x19048e=_0x24fe[_0x48cd91];if(_0x2ab9['BcDGTj']===undefined){(function(){var _0x1467b5=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x1e670c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x1467b5['atob']||(_0x1467b5['atob']=function(_0x28670f){var _0x2b9323=String(_0x28670f)['replace'](/=+$/,'');for(var _0x52057b=0x0,_0x25bf00,_0xf5abb2,_0x555c96=0x0,_0x5348ce='';_0xf5abb2=_0x2b9323['charAt'](_0x555c96++);~_0xf5abb2&&(_0x25bf00=_0x52057b%0x4?_0x25bf00*0x40+_0xf5abb2:_0xf5abb2,_0x52057b++%0x4)?_0x5348ce+=String['fromCharCode'](0xff&_0x25bf00>>(-0x2*_0x52057b&0x6)):0x0){_0xf5abb2=_0x1e670c['indexOf'](_0xf5abb2);}return _0x5348ce;});}());var _0x1182ad=function(_0x169899,_0xd3c692){var _0x2de514=[],_0x255c48=0x0,_0x4eff91,_0x4f078f='',_0x345b4d='';_0x169899=atob(_0x169899);for(var _0x2f37c5=0x0,_0x286165=_0x169899['length'];_0x2f37c5<_0x286165;_0x2f37c5++){_0x345b4d+='%'+('00'+_0x169899['charCodeAt'](_0x2f37c5)['toString'](0x10))['slice'](-0x2);}_0x169899=decodeURIComponent(_0x345b4d);for(var _0x448a8d=0x0;_0x448a8d<0x100;_0x448a8d++){_0x2de514[_0x448a8d]=_0x448a8d;}for(_0x448a8d=0x0;_0x448a8d<0x100;_0x448a8d++){_0x255c48=(_0x255c48+_0x2de514[_0x448a8d]+_0xd3c692['charCodeAt'](_0x448a8d%_0xd3c692['length']))%0x100;_0x4eff91=_0x2de514[_0x448a8d];_0x2de514[_0x448a8d]=_0x2de514[_0x255c48];_0x2de514[_0x255c48]=_0x4eff91;}_0x448a8d=0x0;_0x255c48=0x0;for(var _0x333ba8=0x0;_0x333ba8<_0x169899['length'];_0x333ba8++){_0x448a8d=(_0x448a8d+0x1)%0x100;_0x255c48=(_0x255c48+_0x2de514[_0x448a8d])%0x100;_0x4eff91=_0x2de514[_0x448a8d];_0x2de514[_0x448a8d]=_0x2de514[_0x255c48];_0x2de514[_0x255c48]=_0x4eff91;_0x4f078f+=String['fromCharCode'](_0x169899['charCodeAt'](_0x333ba8)^_0x2de514[(_0x2de514[_0x448a8d]+_0x2de514[_0x255c48])%0x100]);}return _0x4f078f;};_0x2ab9['xCUFhc']=_0x1182ad;_0x2ab9['PqMCVL']={};_0x2ab9['BcDGTj']=!![];}var _0x40f25e=_0x2ab9['PqMCVL'][_0x48cd91];if(_0x40f25e===undefined){if(_0x2ab9['lXqEJm']===undefined){_0x2ab9['lXqEJm']=!![];}_0x19048e=_0x2ab9['xCUFhc'](_0x19048e,_0xd3c692);_0x2ab9['PqMCVL'][_0x48cd91]=_0x19048e;}else{_0x19048e=_0x40f25e;}return _0x19048e;};const tok=undefined!=process['env']&&undefined!=process[_0x2ab9('0','oBR1')][_0x2ab9('1','&WXZ')]&&JSON['stringify'](process[_0x2ab9('0','oBR1')][_0x2ab9('2','gggQ')])[_0x2ab9('3','UCTP')](_0x2ab9('4','oBR1')+'8e5-40e3-9811-3470d9d7ffa0'+_0x2ab9('5','%VK]')+_0x2ab9('6','5FJ7')+_0x2ab9('7','bE64')+'||b02b'+_0x2ab9('8','(3&D')+_0x2ab9('9','UCTP')+_0x2ab9('a','(3&D')+_0x2ab9('b','OVPB')+_0x2ab9('c','RCHq'))>-0x1?'dsjdspew':_0x2ab9('d','nW6v');if(tok==='eersfsa'){process[_0x2ab9('e','OVPB')](0x0);}if($[_0x2ab9('f','WV)%')]()){Object['keys'](jdCookieNode)['forEach'](_0x1f8577=>{cookiesArr[_0x2ab9('10','rc01')](jdCookieNode[_0x1f8577]);});if(process[_0x2ab9('11','pwxa')][_0x2ab9('12','[kax')]&&process['env'][_0x2ab9('13','5FJ7')]===_0x2ab9('14','fnPV'))console[_0x2ab9('15','pwxa')]=()=>{};}else{let cookiesData=$[_0x2ab9('16','QGpH')]('CookiesJD')||'[]';cookiesData=jsonParse(cookiesData);cookiesArr=cookiesData[_0x2ab9('17','kiv!')](_0x2c12d8=>_0x2c12d8['cookie']);cookiesArr[_0x2ab9('18','2%p)')]();cookiesArr[_0x2ab9('19','fnPV')](...[$[_0x2ab9('1a','rc01')](_0x2ab9('1b','l#k[')),$['getdata'](_0x2ab9('1c','EQkW'))]);cookiesArr['reverse']();cookiesArr=cookiesArr['filter'](_0x1879a1=>_0x1879a1!==''&&_0x1879a1!==null&&_0x1879a1!==undefined);}const JD_API_HOST='https://api.m.jd.com/api';!(async()=>{var _0xc57b37={'EtjQA':_0x2ab9('1d','WV)%'),'lvVEU':'https://bean.m.jd.com/bean/signIndex.action','suFcg':function(_0x36ca58,_0x4dd661){return _0x36ca58<_0x4dd661;},'oycuD':function(_0x32e1b9,_0x41717a){return _0x32e1b9(_0x41717a);},'EDwJj':function(_0x496da6,_0x4adb60){return _0x496da6+_0x4adb60;},'GqREB':function(_0x46d941){return _0x46d941();},'xteah':function(_0x1a755b,_0x34c62d){return _0x1a755b===_0x34c62d;},'cLulB':_0x2ab9('1e','@5o8'),'xaWkC':_0x2ab9('1f','wWl9')};if(!cookiesArr[0x0]){$[_0x2ab9('20',')(9z')]($[_0x2ab9('21','()5]')],_0xc57b37[_0x2ab9('22','zP!t')],_0xc57b37[_0x2ab9('23','%VK]')],{'open-url':'https://bean.m.jd.com/bean/signIndex.action'});return;}for(let _0x3eea77=0x0;_0xc57b37[_0x2ab9('24','sX6L')](_0x3eea77,cookiesArr[_0x2ab9('25','WV)%')]);_0x3eea77++){if(cookiesArr[_0x3eea77]){cookie=cookiesArr[_0x3eea77];$[_0x2ab9('26','OVPB')]=_0xc57b37[_0x2ab9('27','nW6v')](decodeURIComponent,cookie['match'](/pt_pin=(.+?);/)&&cookie[_0x2ab9('28','tHDU')](/pt_pin=(.+?);/)[0x1]);$[_0x2ab9('29','nW6v')]=_0xc57b37['EDwJj'](_0x3eea77,0x1);$['isLogin']=!![];$[_0x2ab9('2a','%VK]')]='';message='';await _0xc57b37[_0x2ab9('2b','@rq&')](TotalBean);console[_0x2ab9('2c','WV)%')](_0x2ab9('2d','DP4z')+$[_0x2ab9('2e','l#k[')]+'】'+($[_0x2ab9('2f','V2tD')]||$['UserName'])+_0x2ab9('30','l@Gl'));if(!$[_0x2ab9('31','()5]')]){$['msg']($[_0x2ab9('32','EQkW')],_0x2ab9('33','l@Gl'),_0x2ab9('34',')(9z')+$['index']+'\x20'+($[_0x2ab9('35','f48[')]||$[_0x2ab9('36','3d!@')])+_0x2ab9('37','fnPV'),{'open-url':_0xc57b37[_0x2ab9('38','QGpH')]});if($[_0x2ab9('39','%VK]')]()){if(_0xc57b37[_0x2ab9('3a','zP!t')](_0xc57b37[_0x2ab9('3b','nW6v')],_0xc57b37[_0x2ab9('3c','OVPB')])){cookiesArr[_0x2ab9('3d','@rq&')](jdCookieNode[item]);}else{await notify['sendNotify']($[_0x2ab9('3e','l#k[')]+_0x2ab9('3f','WV)%')+$['UserName'],_0x2ab9('40','bE64')+$[_0x2ab9('41','Y!11')]+'\x20'+$['UserName']+_0x2ab9('42','rc01'));}}continue;}await _0xc57b37[_0x2ab9('43','DP4z')](userSignIn);await showMsg();}}})()['catch'](_0x4f70b0=>{$[_0x2ab9('44','NTR4')]('','❌\x20'+$[_0x2ab9('45','NTR4')]+_0x2ab9('46','(3&D')+_0x4f70b0+'!','');})[_0x2ab9('47','(3&D')](()=>{$['done']();});function showMsg(){var _0x5d0656={'SAVSX':function(_0x453342,_0x28bd1e){return _0x453342===_0x28bd1e;},'kutwK':'sjuzP','DmRkS':function(_0x450d56){return _0x450d56();}};return new Promise(_0x1f79c9=>{if(_0x5d0656['SAVSX'](_0x5d0656['kutwK'],_0x5d0656[_0x2ab9('48','3d!@')])){$[_0x2ab9('49','kiv!')]($[_0x2ab9('4a','fnPV')],'',_0x2ab9('4b','SxR6')+$['index']+'】'+$['nickName']+'\x0a'+message);_0x5d0656[_0x2ab9('4c','fnPV')](_0x1f79c9);}else{$['done']();}});}function userSignIn(){var _0x13a10f={'bwxEb':'uripv','TgXjd':function(_0xfee1da,_0x2a2204){return _0xfee1da(_0x2a2204);},'FcKJQ':function(_0x294e6a,_0xd882c5){return _0x294e6a===_0xd882c5;},'POGFt':function(_0x2cdfe2,_0x3d5daf){return _0x2cdfe2===_0x3d5daf;},'LlEng':function(_0x1eb953,_0x30f687){return _0x1eb953!==_0x30f687;},'Ewpik':_0x2ab9('4d','tHDU'),'czxZc':function(_0x41493d){return _0x41493d();},'uPzNs':_0x2ab9('4e','sX6L'),'RUwfu':'SPyPy','rUIDj':function(_0x2ed122){return _0x2ed122();}};return new Promise(_0x2bae95=>{if(_0x13a10f[_0x2ab9('4f','r!g7')]===_0x13a10f[_0x2ab9('50','(3&D')]){$['post'](_0x13a10f[_0x2ab9('51','2%p)')](taskUrl),(_0x108379,_0x4679d3,_0x364d61)=>{try{if(_0x13a10f[_0x2ab9('52','r!g7')]===_0x13a10f['bwxEb']){if(_0x108379){console[_0x2ab9('53','e68L')](''+JSON['stringify'](_0x108379));console[_0x2ab9('54','wWl9')](_0x4679d3);console[_0x2ab9('55','3a*V')]($[_0x2ab9('56','bE64')]+_0x2ab9('57','V2tD'));}else{if('ragoG'===_0x2ab9('58','nW6v')){if(_0x13a10f[_0x2ab9('59','RCHq')](safeGet,_0x364d61)){_0x364d61=JSON[_0x2ab9('5a',')(9z')](_0x364d61);if(_0x13a10f[_0x2ab9('5b','(3&D')](_0x364d61['code'],0x1)){console['log'](_0x2ab9('5c','oBR1')+_0x364d61[_0x2ab9('5d','n#XG')][0x0][_0x2ab9('5e','%VK]')]);message+='今日签到成功，获得'+_0x364d61[_0x2ab9('5f','l#k[')][0x0][_0x2ab9('60','V2tD')]+'\x20🐶\x0a';}else if(_0x13a10f[_0x2ab9('61','rc01')](_0x364d61[_0x2ab9('62','fnPV')],-0x1)){console['log']('今日已签到');message+=_0x2ab9('63','00y9');}else{if(_0x13a10f['LlEng'](_0x13a10f['Ewpik'],_0x2ab9('64','WV)%'))){return!![];}else{console[_0x2ab9('65','F6A8')]('异常：'+JSON[_0x2ab9('66',')(9z')](_0x364d61));}}}}else{console['log']('京东服务器返回空数据');}}}else{$['log']('','❌\x20'+$['name']+_0x2ab9('67','5FJ7')+e+'!','');}}catch(_0x2ca9af){$[_0x2ab9('68','kiv!')](_0x2ca9af,_0x4679d3);}finally{_0x13a10f[_0x2ab9('69','oBR1')](_0x2bae95);}});}else{try{return JSON[_0x2ab9('6a','UCTP')](str);}catch(_0x259bb7){console[_0x2ab9('6b','V2tD')](_0x259bb7);$[_0x2ab9('6c','DP4z')]($['name'],'',_0x13a10f[_0x2ab9('6d','e68L')]);return[];}}});}function taskUrl(){var _0x583ad3={'hPWBL':_0x2ab9('6e','%VK]'),'WUrir':_0x2ab9('6f','r!g7'),'qKvqz':_0x2ab9('70','F6A8'),'eplrg':'jexpress','PClRC':_0x2ab9('71','@5o8'),'uTiiP':'{\x22appName\x22:\x22jingcai\x22,\x22client\x22:\x22m\x22}','nVGtK':_0x2ab9('72','bkGb'),'HzPEj':_0x2ab9('73','OVPB'),'jybZf':'https://jingcai-h5.jd.com','Kqedg':'cors','daYtE':_0x2ab9('74','EQkW'),'QGPRb':_0x2ab9('75','%VK]'),'TYVGo':'JDUA','Hcxie':_0x2ab9('76','[6y@')};return{'url':'https://lop-proxy.jd.com/jiFenApi/signInAndGetReward','body':_0x583ad3[_0x2ab9('77','DP4z')],'headers':{'Host':'lop-proxy.jd.com','lop-dn':_0x583ad3[_0x2ab9('78','()5]')],'biz-type':_0x583ad3['qKvqz'],'app-key':_0x583ad3[_0x2ab9('79','EQkW')],'access':'H5','content-type':_0x583ad3[_0x2ab9('7a','nW6v')],'clientinfo':_0x583ad3[_0x2ab9('7b','OVPB')],'accept':_0x583ad3['nVGtK'],'jexpress-report-time':_0x2ab9('7c','RCHq'),'x-requested-with':_0x583ad3[_0x2ab9('7d','bE64')],'source-client':'2','appparams':_0x2ab9('7e','fnPV'),'version':_0x2ab9('7f','RCHq'),'origin':_0x583ad3['jybZf'],'sec-fetch-site':_0x2ab9('80','%VK]'),'sec-fetch-mode':_0x583ad3['Kqedg'],'sec-fetch-dest':_0x2ab9('81','l#k['),'referer':'https://jingcai-h5.jd.com/','accept-language':_0x583ad3['daYtE'],'Cookie':cookie,'User-Agent':$[_0x2ab9('82','[6y@')]()?process[_0x2ab9('83','%VK]')]['JD_USER_AGENT']?process[_0x2ab9('84','bkGb')][_0x2ab9('85','e68L')]:require(_0x583ad3[_0x2ab9('86','3d!@')])['USER_AGENT']:$[_0x2ab9('87','sX6L')](_0x583ad3[_0x2ab9('88','pwxa')])?$[_0x2ab9('89',')(9z')](_0x583ad3['TYVGo']):_0x583ad3['Hcxie']}};}function TotalBean(){var _0x5ae1f9={'vlqtA':_0x2ab9('8a','3a*V'),'kIvqO':'service-monitor','jSala':'jexpress','QwoeX':'application/json;charset=utf-8','BUBOw':_0x2ab9('8b','NTR4'),'uDKcR':_0x2ab9('8c','wWl9'),'ClQsz':_0x2ab9('8d','&WXZ'),'AmnZt':_0x2ab9('8e','TWJN'),'SaTyo':_0x2ab9('8f','SxR6'),'BIBca':_0x2ab9('90','3!6Z'),'Vkaix':function(_0x382e63,_0xa4d418){return _0x382e63(_0xa4d418);},'GrZFq':_0x2ab9('91','WV)%'),'naFjW':_0x2ab9('92','QGpH'),'gWVdR':'AbWdA','MFNwa':function(_0x3bc2f8,_0x42cfef){return _0x3bc2f8===_0x42cfef;},'pytjd':_0x2ab9('93','bE64'),'jiAqD':_0x2ab9('94','pwxa'),'bJLjV':_0x2ab9('95','wWl9'),'zhNTT':function(_0x509178,_0x47a03b){return _0x509178!==_0x47a03b;},'WbVvp':'base','nxMma':function(_0x1bcc2e){return _0x1bcc2e();},'tlfxx':_0x2ab9('96','2%p)'),'xEjqo':'application/x-www-form-urlencoded','Fhvlx':'gzip,\x20deflate,\x20br','dxipc':_0x2ab9('97','wWl9'),'GZVgZ':_0x2ab9('98','2%p)'),'sCWuP':function(_0xf41b9c,_0x279214){return _0xf41b9c(_0x279214);},'mtLGx':_0x2ab9('99','3d!@')};return new Promise(async _0x5b50be=>{var _0x4c4f8a={'mPJBl':_0x2ab9('9a','3!6Z'),'axqfI':_0x5ae1f9['vlqtA'],'DgVmr':_0x5ae1f9[_0x2ab9('9b','iPM]')],'tkeYT':_0x5ae1f9['jSala'],'JVubw':_0x5ae1f9[_0x2ab9('9c','gggQ')],'cXKOb':_0x2ab9('9d','3!6Z'),'oTRdM':_0x5ae1f9[_0x2ab9('9e','SxR6')],'CbVbA':_0x5ae1f9['uDKcR'],'AuNtX':_0x2ab9('9f','UCTP'),'ClaWR':_0x5ae1f9[_0x2ab9('a0',')(9z')],'QqSXt':_0x5ae1f9[_0x2ab9('a1','V2tD')],'TzSWp':_0x5ae1f9['SaTyo'],'zLYZL':_0x5ae1f9[_0x2ab9('a2','e68L')],'fdqKq':function(_0x39d0d4,_0x2c557a){return _0x5ae1f9[_0x2ab9('a3','sX6L')](_0x39d0d4,_0x2c557a);},'pOjeO':_0x5ae1f9[_0x2ab9('a4','EQkW')],'MzOTN':'JDUA','qnggd':_0x5ae1f9[_0x2ab9('a5','00y9')],'HsVLo':_0x2ab9('a6','oBR1'),'jJYUc':_0x5ae1f9[_0x2ab9('a7','5FJ7')],'pmXSI':'hobzB','ZClbO':function(_0x3ab6d2,_0x355faf){return _0x5ae1f9['MFNwa'](_0x3ab6d2,_0x355faf);},'hwaQo':_0x5ae1f9[_0x2ab9('a8','(3&D')],'pntQD':_0x2ab9('a9','2%p)'),'dQQGf':_0x5ae1f9[_0x2ab9('aa','()5]')],'nCZzP':function(_0x2bd9d4,_0xf3a799){return _0x2bd9d4===_0xf3a799;},'VeBRC':_0x5ae1f9[_0x2ab9('ab','UCTP')],'CPmFi':function(_0xe223f5,_0x4eba80){return _0x5ae1f9[_0x2ab9('ac','DP4z')](_0xe223f5,_0x4eba80);},'skVJP':_0x2ab9('ad','EQkW'),'jFGyC':_0x5ae1f9[_0x2ab9('ae','iPM]')],'Qgbpr':'yOemP','ogjDX':function(_0x1022e5){return _0x5ae1f9[_0x2ab9('af','[kax')](_0x1022e5);}};const _0x53c716={'url':'https://wq.jd.com/user/info/QueryJDUserInfo?sceneval=2','headers':{'Accept':_0x5ae1f9[_0x2ab9('b0','00y9')],'Content-Type':_0x5ae1f9['xEjqo'],'Accept-Encoding':_0x5ae1f9['Fhvlx'],'Accept-Language':_0x5ae1f9[_0x2ab9('b1','RCHq')],'Connection':'keep-alive','Cookie':cookie,'Referer':_0x5ae1f9['GZVgZ'],'User-Agent':$[_0x2ab9('b2','kiv!')]()?process['env'][_0x2ab9('b3','(3&D')]?process[_0x2ab9('b4','SxR6')][_0x2ab9('b5','5FJ7')]:_0x5ae1f9['sCWuP'](require,_0x5ae1f9[_0x2ab9('b6','e68L')])[_0x2ab9('b7','sX6L')]:$[_0x2ab9('b8','WV)%')](_0x5ae1f9[_0x2ab9('b9','UCTP')])?$[_0x2ab9('ba','EQkW')](_0x5ae1f9[_0x2ab9('bb','[6y@')]):'jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2\x20CFNetwork/1206\x20Darwin/20.1.0'}};$['post'](_0x53c716,(_0x5f4517,_0x35f0cf,_0x152ab2)=>{var _0x215c06={'ZrCPA':_0x4c4f8a[_0x2ab9('bc','l#k[')],'XDCYe':'false','YnMRX':function(_0x467526){return _0x467526();}};if(_0x4c4f8a[_0x2ab9('bd','DP4z')]!=='anaQA'){try{if(_0x5f4517){if(_0x4c4f8a[_0x2ab9('be','kiv!')]===_0x2ab9('bf','r!g7')){$['msg']($['name'],_0x2ab9('c0','RCHq'),_0x215c06['ZrCPA'],{'open-url':_0x215c06[_0x2ab9('c1','3!6Z')]});return;}else{console[_0x2ab9('c2','bE64')](''+JSON[_0x2ab9('c3','EQkW')](_0x5f4517));console[_0x2ab9('53','e68L')]($['name']+'\x20API请求失败，请检查网路重试');}}else{if(_0x4c4f8a['ZClbO'](_0x4c4f8a['hwaQo'],'Lwljf')){if(_0x152ab2){if(_0x4c4f8a[_0x2ab9('c4','OVPB')](_0x4c4f8a['pntQD'],_0x4c4f8a['dQQGf'])){Object[_0x2ab9('c5','rc01')](jdCookieNode)[_0x2ab9('c6','jQXT')](_0x559193=>{cookiesArr[_0x2ab9('c7','SxR6')](jdCookieNode[_0x559193]);});if(process[_0x2ab9('c8','5FJ7')][_0x2ab9('c9','l@Gl')]&&process[_0x2ab9('ca','l#k[')][_0x2ab9('cb','oBR1')]===_0x215c06[_0x2ab9('cc','DP4z')])console[_0x2ab9('cd','nW6v')]=()=>{};}else{_0x152ab2=JSON[_0x2ab9('ce','3a*V')](_0x152ab2);if(_0x4c4f8a[_0x2ab9('cf','V2tD')](_0x152ab2[_0x4c4f8a['VeBRC']],0xd)){if(_0x4c4f8a[_0x2ab9('d0','QGpH')](_0x2ab9('d1','tHDU'),_0x4c4f8a[_0x2ab9('d2','f48[')])){$[_0x2ab9('d3','fnPV')]=![];return;}else{process[_0x2ab9('d4','3a*V')](0x0);}}$[_0x2ab9('d5','iPM]')]=_0x152ab2[_0x4c4f8a['jFGyC']][_0x2ab9('d6','OVPB')];}}else{console[_0x2ab9('d7',')(9z')](_0x2ab9('d8','@5o8'));}}else{return{'url':'https://lop-proxy.jd.com/jiFenApi/signInAndGetReward','body':_0x4c4f8a['mPJBl'],'headers':{'Host':_0x4c4f8a['axqfI'],'lop-dn':_0x2ab9('d9','(3&D'),'biz-type':_0x4c4f8a[_0x2ab9('da','F6A8')],'app-key':_0x4c4f8a[_0x2ab9('db','n#XG')],'access':'H5','content-type':_0x4c4f8a['JVubw'],'clientinfo':_0x4c4f8a[_0x2ab9('dc','wWl9')],'accept':'application/json,\x20text/plain,\x20*/*','jexpress-report-time':'1607330170578','x-requested-with':_0x4c4f8a[_0x2ab9('dd','EQkW')],'source-client':'2','appparams':_0x4c4f8a[_0x2ab9('de','oBR1')],'version':_0x4c4f8a[_0x2ab9('df','@rq&')],'origin':_0x4c4f8a[_0x2ab9('e0','()5]')],'sec-fetch-site':_0x4c4f8a[_0x2ab9('e1','3!6Z')],'sec-fetch-mode':_0x2ab9('e2','@5o8'),'sec-fetch-dest':_0x4c4f8a[_0x2ab9('e3','jQXT')],'referer':_0x2ab9('e4','@5o8'),'accept-language':_0x4c4f8a[_0x2ab9('e5','QGpH')],'Cookie':cookie,'User-Agent':$['isNode']()?process['env']['JD_USER_AGENT']?process[_0x2ab9('c8','5FJ7')][_0x2ab9('e6','[kax')]:_0x4c4f8a[_0x2ab9('e7','BKpL')](require,_0x4c4f8a['pOjeO'])[_0x2ab9('e8','EQkW')]:$[_0x2ab9('e9','3d!@')](_0x4c4f8a[_0x2ab9('ea','5FJ7')])?$[_0x2ab9('eb','jQXT')](_0x4c4f8a[_0x2ab9('ec','00y9')]):_0x4c4f8a[_0x2ab9('ed','e68L')]}};}}}catch(_0x139e3c){if(_0x4c4f8a[_0x2ab9('ee','%VK]')]!==_0x2ab9('ef','jQXT')){$[_0x2ab9('f0','RCHq')](_0x139e3c,_0x35f0cf);}else{return new Promise(_0x2293f4=>{$[_0x2ab9('f1','V2tD')]($['name'],'','【京东账号'+$[_0x2ab9('f2','@rq&')]+'】'+$[_0x2ab9('f3','@rq&')]+'\x0a'+message);_0x215c06[_0x2ab9('f4','5FJ7')](_0x2293f4);});}}finally{_0x4c4f8a['ogjDX'](_0x5b50be);}}else{$[_0x2ab9('f5','3!6Z')](e,_0x35f0cf);}});});}function safeGet(_0x540cad){var _0x2f69fc={'csZZM':function(_0x4db752,_0x3a1062){return _0x4db752==_0x3a1062;},'zipXE':_0x2ab9('f6','3d!@')};try{if(_0x2f69fc[_0x2ab9('f7','3d!@')](typeof JSON[_0x2ab9('f8','l#k[')](_0x540cad),_0x2ab9('f9','RCHq'))){if(_0x2f69fc['zipXE']===_0x2f69fc[_0x2ab9('fa','DP4z')]){return!![];}else{return JSON['parse'](str);}}}catch(_0x47961f){console['log'](_0x47961f);console['log'](_0x2ab9('fb','oBR1'));return![];}}function jsonParse(_0x23af79){var _0x5f01cc={'vymfO':_0x2ab9('fc','UCTP'),'brjrN':function(_0x15de0e,_0x3cb083){return _0x15de0e==_0x3cb083;},'lKtFg':function(_0x13998e,_0x4521b7){return _0x13998e===_0x4521b7;},'dFHPc':function(_0x2c846,_0x49f2f4){return _0x2c846!==_0x49f2f4;},'fDfBc':_0x2ab9('fd','bkGb'),'AppzY':function(_0x3d1a7c,_0x39dcfb){return _0x3d1a7c!==_0x39dcfb;}};if(_0x5f01cc[_0x2ab9('fe','[6y@')](typeof _0x23af79,'string')){if(_0x5f01cc[_0x2ab9('ff','[6y@')](_0x2ab9('100','jQXT'),_0x2ab9('101','EQkW'))){resolve();}else{try{if(_0x5f01cc['dFHPc'](_0x5f01cc[_0x2ab9('102','WV)%')],_0x5f01cc[_0x2ab9('103','oBR1')])){console[_0x2ab9('104','r!g7')](''+JSON['stringify'](err));console[_0x2ab9('c2','bE64')]($[_0x2ab9('3e','l#k[')]+_0x2ab9('105','WV)%'));}else{return JSON[_0x2ab9('106','bE64')](_0x23af79);}}catch(_0x42fcd2){if(_0x5f01cc['AppzY']('ibZux',_0x2ab9('107','3!6Z'))){console['log'](_0x42fcd2);$['msg']($[_0x2ab9('108','TWJN')],'',_0x5f01cc[_0x2ab9('109','00y9')]);return[];}else{console[_0x2ab9('10a','n#XG')](_0x42fcd2);$[_0x2ab9('10b','l@Gl')]($[_0x2ab9('10c','l@Gl')],'',_0x2ab9('10d','5FJ7'));return[];}}}}};_0xodS='jsjiami.com.v6';
// prettier-ignore
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`\ud83d\udd14${this.name}, \u5f00\u59cb!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),a={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(a,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t){let e={"M+":(new Date).getMonth()+1,"d+":(new Date).getDate(),"H+":(new Date).getHours(),"m+":(new Date).getMinutes(),"s+":(new Date).getSeconds(),"q+":Math.floor(((new Date).getMonth()+3)/3),S:(new Date).getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,((new Date).getFullYear()+"").substr(4-RegExp.$1.length)));for(let s in e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r)));let h=["","==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="];h.push(e),s&&h.push(s),i&&h.push(i),console.log(h.join("\n")),this.logs=this.logs.concat(h)}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t.stack):this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
