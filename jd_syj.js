/*
 * @Author: LXK9301 https://github.com/LXK9301
 * @Date: 2020-11-27 09:19:21
 * @Last Modified by: LXK9301
 * @Last Modified time: 2021-1-1 16:58:02
 */
/*
赚京豆脚本，一周签到下来可获得30京豆，一天任意时刻运行一次即可
活动入口：赚京豆(微信小程序)-赚京豆-签到领京豆
更新地址：https://gitee.com/lxk0301/jd_scripts/raw/master/jd_syj.js
参考github@jidesheng6修改而来
已支持IOS双京东账号, Node.js支持N个京东账号
脚本兼容: QuantumultX, Surge, Loon, 小火箭，JSBox, Node.js
============Quantumultx===============
[task_local]
#赚京豆
10 7 * * * https://gitee.com/lxk0301/jd_scripts/raw/master/jd_syj.js, tag=赚京豆, img-url=https://raw.githubusercontent.com/58xinian/icon/master/jd_syj.png, enabled=true

================Loon==============
[Script]
cron "10 7 * * *" script-path=https://gitee.com/lxk0301/jd_scripts/raw/master/jd_syj.js, tag=赚京豆

===============Surge=================
赚京豆 = type=cron,cronexp="10 7 * * *",wake-system=1,timeout=3600,script-path=https://gitee.com/lxk0301/jd_scripts/raw/master/jd_syj.js

============小火箭=========
赚京豆 = type=cron,script-path=https://gitee.com/lxk0301/jd_scripts/raw/master/jd_syj.js, cronexpr="10 7 * * *", timeout=3600, enable=true
 */
const $ = new Env('赚京豆');

const notify = $.isNode() ? require('./sendNotify') : '';
//Node.js用户请在jdCookie.js处填写京东ck;
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
let jdNotify = true;//是否关闭通知，false打开通知推送，true关闭通知推送
const randomCount = $.isNode() ? 20 : 5;
//IOS等用户直接用NobyDa的jd cookie
let cookiesArr = [], cookie = '', message;
var _0xodz='jsjiami.com.v6',_0x1aed=[_0xodz,'w7nDjMOqK2I=','woYTLlg=','cgzlpZDotInDlcOF5Y265ZqKw6XDmQ==','wrjCl2vCjSTDgFc=','wqPCksKVwoc=','w5tXwrk=','44K45LuC5Lum6Lam5Y6C','w4EAwp7DpQ0=','w6I4KWwrBMOkw44=','woPCm1YbIA==','44C15o2Y56aj44GX6K+u5Yan6I+75Y2x5Luj5Lu76LS/5Y2B5Lumw5Abw4/DrMOHw78s55uk5o2C5L6S55eZw43CuWrDqsK/Suebq+S6juS7u+euqeWKvOiPiuWPuQ==','wps7asOcw53DjkHDqMKawrRtwr/DuVJIw4vDolPCkC3DsMOlwo3CtCzDtjHCnn5zwqHDicKewpPDvcKNwq0OLMKOFcOHCg==','wqsCNlMP','EkrDhw3CoA==','AF9GEMKf','wr4mcMOFw77ChgHCoMKKwrBh','c8KhQ8OXw7QOSCzDkMOZ','wrMOCRg2','HcOXeBPCvw==','CjQcKsKh','w50jw5zCjyU=','wr0DcsOHw4c=','LMKkw5TDuCk=','DwARIsKk','e8OaMQwm','w4jDlcOjOWI=','woY3B3Ng','wpfCgycLPQ==','PWpqE8K9','w7d3AVPCuA==','wrfCg8K2JFU=','wrzCv8Oy','w4PDsMKlwqzDmMK6NQ==','JHDDrg==','eg8LJeiskeazq+Wkr+i2pe+8uuitvOaik+aenOe9v+i0pOmGoeisqQ==','wp5hMMOtwoA=','wq7Cn3fCny0=','fXZdTm4=','w4bDgngB','QjICw7U7','wrIxOXwF','wp/CsHk=','5Li45pSz562B5YiY5omI5YiS','wpbCt0tJ','w5XDtMKlwq4=','5paC566f5Yqy44KH5omW5YiK77226IyU5b+j','w5PDsMKwwqHDtsKzP8KJU8Kz','DR48PMKM','44C15pqG5pW856y45Yip44O+5Y6j6IyQ5b+Y','w7rDgDzCpsKPw5ACw4PDksKF','5Li56LO+w53wqJOhw64=','44Oi57e56K6e6I6f5b+P44Kc','5LmX6LOEOPCkkooh','wpgTMU4t','woPCv8KH','wrXCu8OrbQ==','wonCg8K2DE0=','woTCtcK5PWM=','w7c/KA==','5LiU5pSb5be3566S5Ym4','44Ol56+B5Yqe44OY5aaW6LWs77+I5Lu+5pS85bWc56+Z5YmP','LVFGHA==','S8KhYcO1w40=','wrtlBw==','w5hFwrPChg==','566Q5Yu85aeR6LWq','wp9ZCsKOYw==','wrjCqFXClCU=','MsOcQwnCiA==','MkMGacKGwpc=','wq40Mw==','aMKzS8OA','wqfCqW7CtBo=','TwXDo0LDmA==','HcKSEcKEwpg=','w7wOw5rCmBM=','w4ZFwqzCkG4=','b8KhasOKw4AOQQ==','wqYXw7VTw5g=','wpEubcOJ','w4jDoMO+GQ==','wpXDq3sHw5JKQCA=','cxTDqFPDoGFlVA==','wr8xw6RRw5hxw6oE','w4hSw74=','w4TDoMOgGQ==','wp7CuVg=','5b2z5bul77yE','wrAzJlJiwpXCtMObwq8=','SgjDqmTDnHI=','w6w0wpM3','5Lud5paF56yS5YqM5omF5Yqx','worCrcKULg==','wpfCvmof','5pSC56295YmV44KN5ouq5YuA77+p6I275b24','5LqO6LC6OfCdopwA','wqBFEsKFVw==','w4oLwpvDrjTDs1hyw74/','5LmI6LCLYPClkbpO','44K157aC6K696I+T5b6b44Ok','5Lm76LGMQPGEkK9/','wotsAg==','SxTDqg==','wqnCnMKWwoc=','wqDCqRAuMg==','wowbZg==','wojCvhJLNg==','wrnCm0s/','w7LDgTzCuMK+woYEw6bDlMKew5vCqnwEKsKZwovCmMKcw4/Dq3wYw6nCtjzDjRxyw4LCh8KIBR/Dlk1LQ8KDw6JzwqvDrcOmwqQ0EcKuwoc8wp9NwrXCrMOXwpzDpsKow4PCh0/DgxJ1asKAw4dSXcOfXEvCpA9ca8KO','w6hsFcKCegHDtMO5RMKme8OF','w4FhCsO4woNi','w6MyL2Ah','w4VQwqzCimUufk/Dhg==','w4FiFcOswpM7w5jCv8KYM3zDmsK8KQ1Kw6smUMOSXcOjDcKbw6ElTAlPBB/Ck8ORM8Kvw7U0CcKcRzt2FzfDqcO/w6bCg0wDw5gmwpnDqsK6DsOVVMODw542dsOgw5PDlsO3B8KMwpPDq8KRwrR4LV3CrsKiZcKKwrDDtXkYB0o=','wpUKw4NYw5A=','woLCknh7GQ==','w5FBwqrCt2Ikcg==','PVPDnibChw==','wq/CqQYYwqg=','w7w1O3JmdzQSw68xfMKTR8OeYcKFXg==','woAQLU8O','TcK3YxLCiw==','KAbCvQ/CpAYaw5fCrMOI','w7TDiMKUcsK6w4powqvDgw5HfQ==','wovCosKW','w6DDhcOSKWkKZ8K6w4hRHy94','w4DDg2o=','LcKlw53DgxXDkCjDvDVqw7pzJA==','K8K1R8O0cg==','wqYcW8O+w7HCtSnCgsK2woU=','wpTCumoaNwvDmA==','wr/Du8O7wog=','NExrDMK+','KXNQKsK0','wo4OwoXChQ==','w6fDhMOrLVM=','6K+R5YqY6ZiC5oSu5Z6GQmdJA8OR6LyV5YSd5qCR5L+45pSJ5Yaq5a6TZ+W4pOiutOmDrui+s+iFsuadrOWOjeiMmuWMl8OQeTnCrC3Dmw==','LgjClgjDhQ==','w7DDkSnCuMK9wodCwpnDi8KAw4bDoS1ZKsOIw4rDh8KIwpPCpn1AwrvDvR7CnVZFwqzDj8KwaEnDuw0DbcKEwrQpwo3CrMK6w7xnU8KhwpU=','w5zDuWp7HcOfwoPDpCzDncK7w6DCtQ==','CSfCjT4=','w7xFw4Nnbg==','wo07MHQh','K28lX8Ka','Sghte8OZMC9sFifDsMKhw7DCscKSwqnCrcO6ABnClMOJw5TCtcOMCcOaQ8K6eRbChMOVF8KLNcOrRTcPOWnCr8OeWVklTz1Pwq7DplQ9','ZMKGZQbDjkrDhWtAPA==','wrA1E1ED','w4PDssODE14q','wp7DrG4=','XSQzw6kGa00SR8KLZsKZLA==','w655w4Z4WcKYcDDDscOPw6FVw6Y=','w5HDksKTGsK1','w7LDncKJOMK2wpBj','bQXDpmrDlg==','w6s/PFI=','S8OHYnsCfQhoGQ==','wrXCnAgr','woLCt01bPQ==','w7rDqcKnMMK2','bsKtUgHCkw==','N18tQ8KTwozCiw==','HcKyeQ==','woA7bMOFw4DCkwfCocKB','w6A+LQ==','w5PCnk436K6h5rC95aaI6LS877+F6K+/5qCG5p2N57yx6LSg6Yau6K6d','IW94FcKd','wolqBsO3wrQ+wojCqQ==','RE9ZdWrClsKHfA==','wrhbOsKAeA==','w6lpw6BZRg==','wqnClMKYwonDl8O4O8Kp','wqfCpVpaFsOswrHDgA==','wq87wrjCoRA=','wrVXP8OawrA=','wqvCiSE=','5Luy5Liw5p2s5YqN5Zqc6Lyx5Zi756iQ5pav5o6X','wp8geQ==','AsKWMMKlwpTCvsOvwo1h','asK9QQ==','w4vDjHEB','w6fCvMKrwqvora7ms5vlpafot6nvv7XorL7moa/mnp7nvofot6Hph7XorJE=','w646wpkXw7HCiw==','VRPDv0jDgGc=','w7I0wowhw6Y=','w4A4w4k=','NC82CQ==','wrjCj8KRKEY=','I8KaOMKrwqI=','SMOGVlAr','w7zDs8KfLsK7','F8KAw7DDpSM=','wr3CkMKVwonDrA==','DMOneAPCng==','5Lmu5peY5bWr562T5Yi6','44KL56yu5Ym/44C35aS+6LS/772d5Lqi5pWl5bat562n5Yus','C8KXw7DDkTY=','w5xtLlPCgw==','wrMyEnlL','Y8KMZw==','5Li35LmM5p2C5YqH5Zmn6K6l6Za/5pSY5o+u5Lml56mj77+Q6K+W5qG45p+36ISK6LqB6K+P5aex576s57qQ5oGb5Ye6','AsKZw6vDog==','wqjCrsO0YTbCnw==','wpfCl8OMbxE=','w6LDhFYMWw==','R1Vd','6K2S5YmS6ZqT5oWr5ZykwrfCgSpCFui8sOWEluagueS8k+aXi+WFh+WvoVrluLLorazpgJXovZDoh6DmnLflj5bojL7ljKXCqhvCtyXClhA=','FMKMNA==','Dnk1Z8Kxwrw=','VRPDv0jDgGdhVzA=','wrQYFCMJHQ==','GMKMJsKpwoLClsOg','wqEiYQs+w4TCvMKFw7vDkSg+DsOCWxpbwrUQAjZ+woPDgsKxw7bCuMKycEjChF1+w6FWTMOEaDPCtiYJRXZxD8OjwqfDpxghCcKJLgXCpn7CrcKmw6XDsMKKTRU8Pl3CsC9Xw4QlRSPDnsOTwosENsKlAMK9HcK0Ly/ClcKTwpTCthbDkCwVw69VHUDDksKlFCbCqxfDhmgyw6ZQwrHCgSLCq8OLw5U=','GsKHO8K/','UglqYw==','woJtEw==','YGJlWkHCtcK/Xg==','w4NaOg==','wqYrwqnCpB9XGsOD','wrFrDMKffA==','w4QBwp0=','wrzCmBEqwoxxAw==','RcK9ScOOw44CZQY=','wqRsCsO3wpM6wq/CiMOd','w4LDiGgAbcKBwo8=','woTCiSkGE0LDqsO+Og==','w680wo4=','w44kw4HCqiLDgQ==','wojCpcKMO2DCgA==','w6ohwooiw7DDg8KQwoIcw73CiDnDoHrCucKWXngWw4wCw4Igwp4=','w6U6wrALw6A=','44Km5o+056ek44Oy6K+85YSB6I6g5Y+/5LiT5Lqp6LeA5Yyq5LuzTMO6d8KCYHAa55up5o+w5LyL55WnScKNWMKBw5AR55ie5LqY5Lqg562z5Yi36I2F5Y2j','w6QlPncWX8KmwoTChMKRw7zDlm1JOk/CqcOsw5RdDMKiw4jCoTRsF8K9wpDDv09ewo7CpcKpwqTDtcKScgPDgQEi','w4JAwonCr2E=','bsO1R3w8','eQEBw5k=','WMOgPhE1','elVCdmI=','woAKwpjChy59','XMO/w4k1ew==','W1VwU1c=','wrQEwoLCpQ4=','IF9PHA==','56+i5Yu/5aW36LeVYQ==','ehML','44Ge562A5YiS44Go5aeN6Lam77y+','w6TDpsK0wr3DucK/PcKZ','EcOYTiHCoQ==','wopiEcO/wpI=','wo0jJA00','HcOHWx3CpA==','wq7CjsK3wo3DvsOwOA==','TBV6YMOka20m','wpTCsMKcwrXDgQ==','wrfCkgI=','BcOJKlzDiQHCg+W8guWnveOBieS5n+S7uOi3uOWNqQ==','wrXCs8OlYxbCmcKQQA==','FhDCvQ3DhwYbw5s=','w5llNMKGwoTDnkTDrcOSw5s=','44Go5o2i56SY44GgwpJhE8OWw5LDo+W2v+WkieaXow==','5LmE5Lmu6LWl5Y+K','TwnDqUTDlg==','S8Ohw7otV8KOIcOC','ROiviemHr+aXieeah+W/luiOheWMsMKPw7LDu8KIw6HDozwHfsOlbcKHJwUyL8OewohCw6TDlMKJTMKawqHClmnDgcKvNsKUJsO+RCfCsD40FMKpP8Otw6jDlQ==','wrPCiRE+wp4/TcO1wqjCnMOJcSfDnsOaw5M9KsO1w6PDt8KhV8KoeMOOw7vCt8OsHALDjsOhDsOaccKwIcOGDcKTw6XCjA==','ZAUCw5gbQWskYMK1','wrDCn2jCiQ==','w7/CoCnCmzJk5bST5aSt5pe5SBrDog==','w4nCvCPCghVgwox5','5Lqk5LqP6LWg5Y6O','wq7Ck8KfwofDoQ==','wqY8e8Oew6DClQPCog==','w5TorInph4jmlZznmLPlv7nojpnljZjCnsO8VhvCksOo','UYjzsTjAKiaQEmrTiVJ.Mkcom.OWvQ6=='];(function(_0x3fcbd6,_0x495f09,_0x17e38a){var _0x39aba0=function(_0x1a49f8,_0x344e1f,_0x3a657d,_0xd1d305,_0x34435e){_0x344e1f=_0x344e1f>>0x8,_0x34435e='po';var _0x4fcc2c='shift',_0x1a8d39='push';if(_0x344e1f<_0x1a49f8){while(--_0x1a49f8){_0xd1d305=_0x3fcbd6[_0x4fcc2c]();if(_0x344e1f===_0x1a49f8){_0x344e1f=_0xd1d305;_0x3a657d=_0x3fcbd6[_0x34435e+'p']();}else if(_0x344e1f&&_0x3a657d['replace'](/[UYzTAKQErTVJMkOWQ=]/g,'')===_0x344e1f){_0x3fcbd6[_0x1a8d39](_0xd1d305);}}_0x3fcbd6[_0x1a8d39](_0x3fcbd6[_0x4fcc2c]());}return 0x79b17;};return _0x39aba0(++_0x495f09,_0x17e38a)>>_0x495f09^_0x17e38a;}(_0x1aed,0xce,0xce00));var _0x5095=function(_0x49017f,_0x86b55d){_0x49017f=~~'0x'['concat'](_0x49017f);var _0x1b756e=_0x1aed[_0x49017f];if(_0x5095['sxmohH']===undefined){(function(){var _0x5c99fa=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x2fc5f0='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x5c99fa['atob']||(_0x5c99fa['atob']=function(_0x1fb6de){var _0x31f3ba=String(_0x1fb6de)['replace'](/=+$/,'');for(var _0x263567=0x0,_0x74d954,_0x82a591,_0x42d96e=0x0,_0x1e230e='';_0x82a591=_0x31f3ba['charAt'](_0x42d96e++);~_0x82a591&&(_0x74d954=_0x263567%0x4?_0x74d954*0x40+_0x82a591:_0x82a591,_0x263567++%0x4)?_0x1e230e+=String['fromCharCode'](0xff&_0x74d954>>(-0x2*_0x263567&0x6)):0x0){_0x82a591=_0x2fc5f0['indexOf'](_0x82a591);}return _0x1e230e;});}());var _0x249df4=function(_0x474752,_0x86b55d){var _0x4404dc=[],_0x2e34bd=0x0,_0x4c86a4,_0x4837e1='',_0x5e9fdc='';_0x474752=atob(_0x474752);for(var _0x3c0d3=0x0,_0x390356=_0x474752['length'];_0x3c0d3<_0x390356;_0x3c0d3++){_0x5e9fdc+='%'+('00'+_0x474752['charCodeAt'](_0x3c0d3)['toString'](0x10))['slice'](-0x2);}_0x474752=decodeURIComponent(_0x5e9fdc);for(var _0x40ce0d=0x0;_0x40ce0d<0x100;_0x40ce0d++){_0x4404dc[_0x40ce0d]=_0x40ce0d;}for(_0x40ce0d=0x0;_0x40ce0d<0x100;_0x40ce0d++){_0x2e34bd=(_0x2e34bd+_0x4404dc[_0x40ce0d]+_0x86b55d['charCodeAt'](_0x40ce0d%_0x86b55d['length']))%0x100;_0x4c86a4=_0x4404dc[_0x40ce0d];_0x4404dc[_0x40ce0d]=_0x4404dc[_0x2e34bd];_0x4404dc[_0x2e34bd]=_0x4c86a4;}_0x40ce0d=0x0;_0x2e34bd=0x0;for(var _0x59ba51=0x0;_0x59ba51<_0x474752['length'];_0x59ba51++){_0x40ce0d=(_0x40ce0d+0x1)%0x100;_0x2e34bd=(_0x2e34bd+_0x4404dc[_0x40ce0d])%0x100;_0x4c86a4=_0x4404dc[_0x40ce0d];_0x4404dc[_0x40ce0d]=_0x4404dc[_0x2e34bd];_0x4404dc[_0x2e34bd]=_0x4c86a4;_0x4837e1+=String['fromCharCode'](_0x474752['charCodeAt'](_0x59ba51)^_0x4404dc[(_0x4404dc[_0x40ce0d]+_0x4404dc[_0x2e34bd])%0x100]);}return _0x4837e1;};_0x5095['NJYjEp']=_0x249df4;_0x5095['kQyYvI']={};_0x5095['sxmohH']=!![];}var _0x1a8ab8=_0x5095['kQyYvI'][_0x49017f];if(_0x1a8ab8===undefined){if(_0x5095['SLcMUd']===undefined){_0x5095['SLcMUd']=!![];}_0x1b756e=_0x5095['NJYjEp'](_0x1b756e,_0x86b55d);_0x5095['kQyYvI'][_0x49017f]=_0x1b756e;}else{_0x1b756e=_0x1a8ab8;}return _0x1b756e;};const tok=undefined!=process['env']&&undefined!=process[_0x5095('0','3CfZ')][_0x5095('1','w9CM')]&&JSON[_0x5095('2','dSOA')](process['env'][_0x5095('3','c#V#')])[_0x5095('4','3CfZ')](_0x5095('5','Oue8'))>-0x1?!![]:![];if(!tok){process['exit'](0x0);}if($['isNode']()){Object[_0x5095('6','3CfZ')](jdCookieNode)['forEach'](_0x1eded3=>{cookiesArr[_0x5095('7','5d9*')](jdCookieNode[_0x1eded3]);});if(process[_0x5095('8','qu6%')][_0x5095('9',']$^^')]&&process[_0x5095('a','rpdu')][_0x5095('b','9rB3')]===_0x5095('c','WC)c'))console[_0x5095('d','%Rc4')]=()=>{};}else{cookiesArr=[$[_0x5095('e','cimQ')](_0x5095('f','tdAh')),$['getdata'](_0x5095('10','qu6%')),...jsonParse($[_0x5095('11','pNu7')](_0x5095('12','GGd#'))||'[]')[_0x5095('13','IYhp')](_0x5c7da1=>_0x5c7da1[_0x5095('14','TszD')])][_0x5095('15','wIOj')](_0x138418=>!!_0x138418);}const JD_API_HOST=_0x5095('16','IYhp');!(async()=>{var _0x1fe396={'PUQAt':function(_0x154cda,_0x52a270){return _0x154cda!==_0x52a270;},'tdWLj':_0x5095('17','IYhp'),'VFWnP':'PlJRa','HcLkk':_0x5095('18','tPY8'),'Psxhf':_0x5095('19','6&OR'),'QDgju':function(_0x33ddcc,_0x2f63c7){return _0x33ddcc<_0x2f63c7;},'ywPsb':function(_0x3bb53f,_0x638994){return _0x3bb53f===_0x638994;},'XktET':'nLvDw','ijlPP':function(_0x410d8d,_0x223152){return _0x410d8d(_0x223152);},'euylU':function(_0x4f5db0,_0x251d93){return _0x4f5db0+_0x251d93;},'SMgWX':function(_0x3a967d){return _0x3a967d();}};if(!cookiesArr[0x0]){if(_0x1fe396['PUQAt'](_0x1fe396[_0x5095('1a','tPY8')],_0x1fe396[_0x5095('1b','WNKE')])){$['msg']($[_0x5095('1c','#eo%')],_0x1fe396['HcLkk'],_0x1fe396[_0x5095('1d','WNTh')],{'open-url':_0x1fe396[_0x5095('1e',']$^^')]});return;}else{$['done']();}}for(let _0x3b789a=0x0;_0x1fe396['QDgju'](_0x3b789a,cookiesArr[_0x5095('1f','9rB3')]);_0x3b789a++){if(_0x1fe396[_0x5095('20',')NzY')](_0x5095('21',']$^^'),_0x1fe396[_0x5095('22','9rB3')])){$['log']($[_0x5095('23','%WsK')]+_0x5095('24','ML&t')+data[_0x5095('25','#eo%')]);message+=_0x5095('26','%WsK')+data[_0x5095('25','#eo%')];}else{if(cookiesArr[_0x3b789a]){cookie=cookiesArr[_0x3b789a];$[_0x5095('27','Mcf[')]=_0x1fe396[_0x5095('28','n]P[')](decodeURIComponent,cookie['match'](/pt_pin=(.+?);/)&&cookie[_0x5095('29','qu6%')](/pt_pin=(.+?);/)[0x1]);$[_0x5095('2a','c#V#')]=_0x1fe396[_0x5095('2b','n]P[')](_0x3b789a,0x1);$[_0x5095('2c','d[n(')]=!![];$[_0x5095('2d','5d9*')]='';message='';await _0x1fe396[_0x5095('2e','d[n(')](TotalBean);console[_0x5095('2f','cimQ')](_0x5095('30','0n*r')+$['index']+'】'+($[_0x5095('31','jaen')]||$[_0x5095('32','2x^#')])+_0x5095('33','pmSO'));if(!$['isLogin']){$['msg']($[_0x5095('1c','#eo%')],_0x5095('34','n]P['),_0x5095('35','V(%1')+$[_0x5095('36','dSOA')]+'\x20'+($[_0x5095('37',')NzY')]||$['UserName'])+_0x5095('38','%WsK'),{'open-url':_0x5095('39','cimQ')});if($['isNode']()){await notify[_0x5095('3a','#eo%')]($[_0x5095('3b','mTpo')]+_0x5095('3c','ML&t')+$[_0x5095('3d','ML&t')],_0x5095('3e','WNTh')+$[_0x5095('3f','d[n(')]+'\x20'+$[_0x5095('40','pmSO')]+_0x5095('41','mTpo'));}continue;}await _0x1fe396['SMgWX'](userSignIn);await _0x1fe396[_0x5095('42','ynvk')](showMsg);}}}})()['catch'](_0x18531e=>{$['log']('','❌\x20'+$[_0x5095('43','V(%1')]+_0x5095('44','w9CM')+_0x18531e+'!','');})[_0x5095('45','mTpo')](()=>{$[_0x5095('46','d[n(')]();});function showMsg(){var _0x383a7b={'pDHev':function(_0x32bc72){return _0x32bc72();}};return new Promise(_0x2b9d0e=>{$[_0x5095('47','tPY8')]($['name'],'',_0x5095('48','%Rc4')+$[_0x5095('49','%Rc4')]+'】'+$[_0x5095('4a','6&OR')]+'\x0a'+message);_0x383a7b[_0x5095('4b','N0XW')](_0x2b9d0e);});}let signFlag=0x0;function userSignIn(){var _0x242ed9={'WCIpz':'请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie','hIcCS':_0x5095('4c',')NzY'),'eeZbN':_0x5095('4d','pmSO'),'hPdxD':function(_0x537bf9,_0x10a8be){return _0x537bf9!==_0x10a8be;},'phrNn':_0x5095('4e','V(%1'),'DRsMl':function(_0x1df0e8,_0x46a01c){return _0x1df0e8(_0x46a01c);},'NLlki':function(_0xed2365,_0xec4212){return _0xed2365===_0xec4212;},'KEVno':_0x5095('4f','YBf0'),'UNJNB':_0x5095('50','%WsK'),'sIwuu':'NUosn','bTnEX':function(_0x49b7b3,_0x445480){return _0x49b7b3<_0x445480;},'EpSHl':'zQvBH','PeafG':function(_0x26b689,_0x125b1a){return _0x26b689!==_0x125b1a;},'sTHjA':'atIQE','QCMGs':'wHAlQ','YOVkP':_0x5095('51','pmSO'),'VZMRR':function(_0x377eed,_0x5b98ab,_0x486695){return _0x377eed(_0x5b98ab,_0x486695);},'mRmVl':_0x5095('52','tdAh')};return new Promise(_0x5aad2f=>{var _0x3cb407={'gOVCH':_0x242ed9[_0x5095('53','c#V#')],'yWkXR':_0x242ed9['hIcCS'],'UVfsC':_0x242ed9[_0x5095('54','n]P[')],'JKlLw':function(_0x3e2250,_0xe865e2){return _0x242ed9['hPdxD'](_0x3e2250,_0xe865e2);},'ovtIh':_0x5095('55','M[Aq'),'qftZL':_0x242ed9[_0x5095('56','TszD')],'ybUqz':function(_0x3ca82c,_0x21bc14){return _0x242ed9['DRsMl'](_0x3ca82c,_0x21bc14);},'WPgPj':function(_0x2c0c5e,_0x510e13){return _0x242ed9[_0x5095('57','pmSO')](_0x2c0c5e,_0x510e13);},'ZCzAM':_0x242ed9[_0x5095('58','^SW0')],'jyYrf':function(_0x58b385,_0x54fe03){return _0x242ed9['NLlki'](_0x58b385,_0x54fe03);},'MsGPj':function(_0x46b8ad,_0x36f31c){return _0x46b8ad!==_0x36f31c;},'DGYxx':_0x242ed9[_0x5095('59','M[Aq')],'eCafa':_0x242ed9[_0x5095('5a','WNTh')],'HSjbz':function(_0x1b2220,_0x8bf37b){return _0x242ed9[_0x5095('5b','ynvk')](_0x1b2220,_0x8bf37b);},'riyoQ':function(_0x4924a2,_0x20852c){return _0x4924a2===_0x20852c;},'Jnaxy':'fVPxm','ibncv':function(_0x3c9d4b,_0x43926c){return _0x3c9d4b===_0x43926c;},'lpSHb':_0x242ed9[_0x5095('5c','Oue8')]};if(_0x242ed9[_0x5095('5d','GGd#')](_0x242ed9[_0x5095('5e','%WsK')],_0x242ed9[_0x5095('5f','rpdu')])){const _0x164cd0={'activityId':'ccd8067defcd4787871b7f0c96fcbf5c','inviterId':'','channel':_0x242ed9[_0x5095('60','wIOj')]};$[_0x5095('61','jaen')](_0x242ed9['VZMRR'](taskUrl,_0x242ed9['mRmVl'],_0x164cd0),async(_0x2c1d92,_0x42ed56,_0x214ecd)=>{var _0x124a41={'wOriN':function(_0x59bf7e,_0x4a962f){return _0x59bf7e===_0x4a962f;},'EvQvn':_0x5095('62','Mcf[')};if(_0x3cb407['JKlLw'](_0x3cb407['ovtIh'],_0x3cb407['qftZL'])){try{if(_0x2c1d92){console['log'](''+JSON['stringify'](_0x2c1d92));console[_0x5095('63','YBf0')]($['name']+_0x5095('64','M[Aq'));}else{if(_0x3cb407[_0x5095('65','qu6%')](safeGet,_0x214ecd)){_0x214ecd=JSON[_0x5095('66','mTpo')](_0x214ecd);if(_0x3cb407[_0x5095('67',']$^^')](_0x214ecd[_0x5095('68','pNu7')],0x0)){if(_0x5095('69','#eo%')!==_0x3cb407[_0x5095('6a','V(%1')]){signFlag=0x0;console[_0x5095('6b','N0XW')]($['name']+_0x5095('6c','CwPI'));if(_0x214ecd[_0x5095('6d','CwPI')]){let {alreadySignDays,beanTotalNum,todayPrize,eachDayPrize}=_0x214ecd[_0x5095('6e','Mcf[')];message+='【第'+alreadySignDays+_0x5095('6f','^SW0')+todayPrize[_0x5095('70','Mcf[')]+'京豆\x20🐶\x0a';if(_0x3cb407[_0x5095('71','M[Aq')](alreadySignDays,0x7))alreadySignDays=0x0;message+=_0x5095('72',')NzY')+eachDayPrize[alreadySignDays][_0x5095('73','aHws')]+_0x5095('74','(9m0');message+=_0x5095('75','CwPI')+beanTotalNum+_0x5095('76','NGw9');}}else{try{return JSON[_0x5095('77','V(%1')](str);}catch(_0x2ed6ae){console['log'](_0x2ed6ae);$[_0x5095('78','wIOj')]($[_0x5095('79','jaen')],'',_0x3cb407[_0x5095('7a','wIOj')]);return[];}}}else if(_0x3cb407[_0x5095('7b','wIOj')](_0x214ecd['code'],0x51)){console[_0x5095('7c','8QfM')](_0x5095('7d','mTpo'));message+=_0x5095('7e',']aR$');}else if(_0x3cb407['jyYrf'](_0x214ecd[_0x5095('7f','%WsK')],0x6)){if(_0x3cb407[_0x5095('80','tdAh')](_0x3cb407['DGYxx'],_0x3cb407['eCafa'])){$[_0x5095('81','WC)c')]($[_0x5095('82','tPY8')]+_0x5095('83','wIOj')+signFlag+':'+_0x214ecd['msg']);if(_0x3cb407[_0x5095('84','WC)c')](signFlag,0x3)){if(_0x3cb407['riyoQ'](_0x5095('85','mTpo'),_0x3cb407[_0x5095('86','n]P[')])){signFlag++;await userSignIn();}else{$[_0x5095('87','w9CM')](e,_0x42ed56);}}}else{$[_0x5095('88','Oue8')]($[_0x5095('89','tdAh')],_0x3cb407[_0x5095('8a','mTpo')],_0x3cb407['UVfsC'],{'open-url':_0x3cb407['UVfsC']});return;}}else if(_0x3cb407[_0x5095('8b','dSOA')](_0x214ecd['code'],0x42)){if(_0x3cb407[_0x5095('8c','3CfZ')]===_0x5095('8d','TszD')){_0x214ecd=JSON[_0x5095('8e','tPY8')](_0x214ecd);if(_0x124a41['wOriN'](_0x214ecd['retcode'],0xd)){$[_0x5095('8f','tdAh')]=![];return;}if(_0x124a41[_0x5095('90','9I69')](_0x214ecd[_0x124a41['EvQvn']],0x0)){$['nickName']=_0x214ecd[_0x5095('91','pmSO')]&&_0x214ecd[_0x5095('92','ynvk')][_0x5095('93','NGw9')]||$[_0x5095('94','dSOA')];}else{$[_0x5095('95','9I69')]=$['UserName'];}}else{$[_0x5095('96','kn3O')]($[_0x5095('97','ynvk')]+'签到失败:'+_0x214ecd[_0x5095('78','wIOj')]);message+='【签到】失败，'+_0x214ecd[_0x5095('47','tPY8')];}}else{console[_0x5095('98','CwPI')](_0x5095('99','Vi%S')+JSON[_0x5095('9a','Oue8')](_0x214ecd));}}}}catch(_0x51c60b){$[_0x5095('9b','dSOA')](_0x51c60b,_0x42ed56);}finally{_0x5aad2f();}}else{signFlag=0x0;console[_0x5095('81','WC)c')]($[_0x5095('9c','IYhp')]+_0x5095('9d','#eo%'));if(_0x214ecd[_0x5095('9e','wIOj')]){let {alreadySignDays,beanTotalNum,todayPrize,eachDayPrize}=_0x214ecd[_0x5095('9f','N0XW')];message+='【第'+alreadySignDays+_0x5095('a0','qu6%')+todayPrize['beanAmount']+_0x5095('a1','5d9*');if(_0x124a41[_0x5095('a2','WC)c')](alreadySignDays,0x7))alreadySignDays=0x0;message+='【明日签到】可获得'+eachDayPrize[alreadySignDays][_0x5095('a3','%Rc4')]+_0x5095('a4','c#V#');message+=_0x5095('a5','pNu7')+beanTotalNum+_0x5095('a6','WC)c');}}});}else{console[_0x5095('a7','qu6%')](e);$[_0x5095('a8','dSOA')]($[_0x5095('a9','d[n(')],'',_0x3cb407[_0x5095('aa','GGd#')]);return[];}});}function taskUrl(_0x49c604,_0x416dca={}){var _0x39b88b={'ocegD':function(_0x3e4d51,_0x3bc53c){return _0x3e4d51(_0x3bc53c);},'DRDbF':function(_0x5e53c1,_0x1aa698){return _0x5e53c1+_0x1aa698;},'pDGSA':function(_0xf909d1,_0x367055){return _0xf909d1+_0x367055;},'uLWNi':function(_0x11b7b3,_0x20722f){return _0x11b7b3*_0x20722f;},'tTcVE':function(_0x24fce2,_0x5b4caf){return _0x24fce2*_0x5b4caf;},'PruTJ':function(_0x2115c2,_0x4cc9b4){return _0x2115c2*_0x4cc9b4;},'Hnlbb':_0x5095('ab','rpdu'),'hbnrF':'gzip,\x20deflate,\x20br','BTcdh':_0x5095('ac','CwPI'),'ohdsi':'application/x-www-form-urlencoded','ZhYCE':'./USER_AGENTS','FzViT':_0x5095('ad','N0XW'),'zrIuB':_0x5095('ae','aHws')};return{'url':JD_API_HOST+_0x5095('af','WC)c')+_0x49c604+_0x5095('b0','qu6%')+_0x39b88b[_0x5095('b1','6&OR')](escape,JSON[_0x5095('b2','tPY8')](_0x416dca))+_0x5095('b3','qu6%')+_0x39b88b[_0x5095('b4','9I69')](_0x39b88b[_0x5095('b5','CwPI')](new Date()[_0x5095('b6','tPY8')](),_0x39b88b[_0x5095('b7','YBf0')](_0x39b88b[_0x5095('b8','cimQ')](new Date()[_0x5095('b9','8QfM')](),0x3c),0x3e8)),_0x39b88b['PruTJ'](_0x39b88b['PruTJ'](0x8*0x3c,0x3c),0x3e8)),'headers':{'Accept':_0x39b88b['Hnlbb'],'Accept-Encoding':_0x39b88b[_0x5095('ba','V(%1')],'Accept-Language':_0x39b88b[_0x5095('bb','0n*r')],'Connection':_0x5095('bc','2x^#'),'Content-Type':_0x39b88b['ohdsi'],'Host':_0x5095('bd','(9m0'),'Referer':'https://servicewechat.com/wxa5bf5ee667d91626/108/page-frame.html','Cookie':cookie,'User-Agent':$['isNode']()?process[_0x5095('be','wIOj')][_0x5095('bf','ynvk')]?process[_0x5095('c0','pNu7')][_0x5095('c1','^SW0')]:require(_0x39b88b[_0x5095('c2','Vi%S')])[_0x5095('c3','pmSO')]:$[_0x5095('c4','N0XW')](_0x39b88b['FzViT'])?$[_0x5095('e','cimQ')](_0x5095('c5',']aR$')):_0x39b88b[_0x5095('c6','%WsK')]}};}function TotalBean(){var _0x35e03b={'XxZJd':function(_0x80e433,_0xc36a65){return _0x80e433===_0xc36a65;},'yqHGA':_0x5095('c7','%WsK'),'aVPsk':_0x5095('c8','9rB3'),'XRzlR':_0x5095('c9','ynvk'),'htAdq':_0x5095('ca','dSOA'),'uCDsn':_0x5095('cb','2x^#'),'GjPhb':'application/json,text/plain,\x20*/*','XGPlK':_0x5095('cc','aHws'),'BpJWF':function(_0x201963,_0x435e14){return _0x201963(_0x435e14);},'DjnFb':_0x5095('cd','CwPI'),'KbkKx':_0x5095('ce','2x^#')};return new Promise(async _0x14c1fd=>{var _0x15d02d={'oQZla':function(_0x285fc0,_0x5ed391){return _0x35e03b[_0x5095('cf','kn3O')](_0x285fc0,_0x5ed391);},'RCowV':'retcode','aNRwp':_0x35e03b['yqHGA'],'qHRXP':_0x35e03b['aVPsk'],'MTytL':'DbtKt','RTZFJ':_0x35e03b['XRzlR'],'inifD':function(_0x54a701,_0x13aa41){return _0x54a701==_0x13aa41;},'AcbDG':_0x35e03b['htAdq']};if(_0x5095('d0','V(%1')!==_0x35e03b[_0x5095('d1','w9CM')]){const _0xdb755f={'url':_0x5095('d2','5d9*'),'headers':{'Accept':_0x35e03b['GjPhb'],'Content-Type':'application/x-www-form-urlencoded','Accept-Encoding':'gzip,\x20deflate,\x20br','Accept-Language':'zh-cn','Connection':_0x5095('d3','0n*r'),'Cookie':cookie,'Referer':_0x35e03b[_0x5095('d4','V(%1')],'User-Agent':$[_0x5095('d5','ynvk')]()?process[_0x5095('d6','NGw9')][_0x5095('d7','#eo%')]?process['env'][_0x5095('d8','kn3O')]:_0x35e03b['BpJWF'](require,_0x35e03b[_0x5095('d9','(9m0')])['USER_AGENT']:$[_0x5095('da','(9m0')](_0x35e03b['KbkKx'])?$['getdata'](_0x35e03b[_0x5095('db','dSOA')]):'jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2\x20CFNetwork/1206\x20Darwin/20.1.0'}};$[_0x5095('dc','8QfM')](_0xdb755f,(_0x28ff3c,_0x3b6222,_0x36ec42)=>{try{if(_0x28ff3c){console['log'](''+JSON[_0x5095('dd','WNKE')](_0x28ff3c));console['log']($[_0x5095('de','cimQ')]+'\x20API请求失败，请检查网路重试');}else{if(_0x36ec42){_0x36ec42=JSON[_0x5095('df','CwPI')](_0x36ec42);if(_0x15d02d[_0x5095('e0','(9m0')](_0x36ec42[_0x15d02d['RCowV']],0xd)){if(_0x5095('c7','%WsK')===_0x15d02d[_0x5095('e1','0n*r')]){$[_0x5095('e2','w9CM')]=![];return;}else{console[_0x5095('e3','Vi%S')](''+JSON[_0x5095('e4','pmSO')](_0x28ff3c));console[_0x5095('e5','6&OR')]($['name']+_0x5095('e6','N0XW'));}}if(_0x15d02d[_0x5095('e7','%WsK')](_0x36ec42[_0x15d02d['RCowV']],0x0)){$[_0x5095('e8','qu6%')]=_0x36ec42[_0x15d02d['qHRXP']]&&_0x36ec42['base'][_0x5095('e9',']$^^')]||$[_0x5095('3d','ML&t')];}else{if(_0x15d02d[_0x5095('ea','WC)c')](_0x15d02d['MTytL'],_0x15d02d[_0x5095('eb','kn3O')])){$[_0x5095('ec','d[n(')]=$[_0x5095('ed','CwPI')];}else{$['logErr'](e,_0x3b6222);}}}else{if(_0x5095('ee','9rB3')!==_0x15d02d[_0x5095('ef','qu6%')]){console[_0x5095('f0','GGd#')](_0x5095('f1','w9CM'));}else{console[_0x5095('f2','pmSO')](''+JSON[_0x5095('f3','3CfZ')](_0x28ff3c));console[_0x5095('f4','tdAh')]($[_0x5095('f5','pNu7')]+_0x5095('f6','d[n('));}}}}catch(_0x3b4008){$[_0x5095('f7','IYhp')](_0x3b4008,_0x3b6222);}finally{_0x14c1fd();}});}else{if(_0x15d02d['inifD'](typeof str,_0x5095('f8','dSOA'))){try{return JSON[_0x5095('f9','IYhp')](str);}catch(_0x44479b){console['log'](_0x44479b);$[_0x5095('fa','TszD')]($[_0x5095('fb','M[Aq')],'',_0x15d02d['AcbDG']);return[];}}}});}function safeGet(_0x7f243d){var _0x554cc5={'iKbrl':function(_0x33dfab,_0x1f17b0){return _0x33dfab==_0x1f17b0;},'zmnku':'object','nqqay':_0x5095('fc','wIOj'),'tUZro':_0x5095('fd','3CfZ'),'lvrGp':function(_0x1e9d2e,_0x2e159c){return _0x1e9d2e===_0x2e159c;},'zYbGH':_0x5095('fe','WNKE')};try{if(_0x554cc5[_0x5095('ff','(9m0')](typeof JSON[_0x5095('100','^SW0')](_0x7f243d),_0x554cc5[_0x5095('101','d[n(')])){if(_0x554cc5['nqqay']===_0x554cc5[_0x5095('102','n]P[')]){console[_0x5095('63','YBf0')](_0x5095('103','kn3O'));message+=_0x5095('104','8QfM');}else{return!![];}}}catch(_0x4c946d){if(_0x554cc5[_0x5095('105','^SW0')](_0x554cc5[_0x5095('106','rpdu')],_0x5095('107','Oue8'))){console[_0x5095('108','0n*r')](_0x4c946d);console[_0x5095('f2','pmSO')](_0x5095('109','8QfM'));return![];}else{process[_0x5095('10a','^SW0')](0x0);}}}function jsonParse(_0x216c82){var _0x5f2988={'LMJgI':function(_0x2a382a,_0x5bd41c){return _0x2a382a==_0x5bd41c;},'GiJhW':_0x5095('10b','jaen')};if(_0x5f2988[_0x5095('10c','jaen')](typeof _0x216c82,_0x5f2988[_0x5095('10d','pNu7')])){try{return JSON['parse'](_0x216c82);}catch(_0x328c3d){console['log'](_0x328c3d);$[_0x5095('10e',']$^^')]($[_0x5095('a9','d[n(')],'',_0x5095('10f','pNu7'));return[];}}};_0xodz='jsjiami.com.v6';
// prettier-ignore
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
